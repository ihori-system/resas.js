<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const {request} = require('undici');

const PACKAGE_NAME = '@ihori-system/resus.js';
const API_ENDPOINT = 'https://opendata.resas-portal.go.jp';

/**
 * @typedef {Object} ResusClientOption
 * @property {string} apiKey APIキー
 */

/**
 * ResusClient
 */
class ResusClient {
  /**
   * constructor
   * @param {ResusClientOption} options
   */
  constructor(options) {
    if (options == null) {
      throw new TypeError(`[${PACKAGE_NAME}] options引数が指定されていません`);
    }
    if (options.apiKey == null) {
      throw new TypeError(`[${PACKAGE_NAME}] apiKeyオプションが指定されていません`);
    }
    this.apiKey = options.apiKey;
    this.defaultHeaders = {'X-API-KEY': this.apiKey};
  }

  /**
   * 都道府県一覧
   * @return {Promise&lt;Array>} prefectures data
   * Ref: https://opendata.resas-portal.go.jp/docs/api/v1/prefectures.html
   */
  prefectures() {
    return request(`${API_ENDPOINT}/api/v1/prefectures`, {headers: this.defaultHeaders})
        .then(({body}) => body.json())
        .then((data) => data.result);
  }

  /**
   * 市区町村一覧
   * @param {number} prefCode 都道府県コード
   * @return {Promise&lt;Array>} 市区町村一覧
   * Ref: https://opendata.resas-portal.go.jp/docs/api/v1/cities.html
   */
  cities(prefCode) {
    if (prefCode == null) {
      throw new TypeError(`[${PACKAGE_NAME}] prefCode引数が指定されていません`);
    }
    if (typeof prefCode !== 'number') {
      throw new TypeError(`[${PACKAGE_NAME}] prefCodeに数値以外の値が入っています`);
    }
    return request(`${API_ENDPOINT}/api/v1/cities`, {
      headers: this.defaultHeaders,
      query: {
        prefCode,
      },
    })
        .then(({body}) => body.json())
        .then((data) => data.result);
  }

  /**
   * 旧市区町村一覧
   * @param {number} prefCode 都道府県コード
   * @param {string} cityCode 市区町村コード
   * @return {Promise&lt;Array>} 旧市区町村一覧
   * Ref: https://opendata.resas-portal.go.jp/docs/api/v1/oldCities.html
   */
  oldCities(prefCode, cityCode) {
    if (prefCode == null) {
      throw new TypeError(`[${PACKAGE_NAME}] prefCode引数が指定されていません`);
    }
    if (typeof prefCode !== 'number') {
      throw new TypeError(`[${PACKAGE_NAME}] prefCodeに数値以外の値が入っています`);
    }
    if (cityCode == null) {
      throw new TypeError(`[${PACKAGE_NAME}] cityCode引数が指定されていません`);
    }
    if (typeof cityCode !== 'string') {
      throw new TypeError(`[${PACKAGE_NAME}] cityCodeに文字列以外の値が入っています`);
    }
    return request(`${API_ENDPOINT}/api/v1/oldCities`, {
      headers: this.defaultHeaders,
      query: {
        prefCode,
        cityCode,
      }})
        .then(({body}) => body.json())
        .then((data) => data.result);
  }

  /**
   * 産業大分類
   * @return {Promise&lt;Array>} 産業大分類
   * Ref: https://opendata.resas-portal.go.jp/docs/api/v1/industries/broad.html
   */
  broadIndustries() {
    return request(`${API_ENDPOINT}/api/v1/industries/broad`, {headers: this.defaultHeaders})
        .then(({body}) => body.json())
        .then((data) => data.result);
  }

  /**
   * 産業中分類
   * @param {string} sicCode 産業大分類コード
   * @return {Promise&lt;Array>} 産業中分類
   * Ref: https://opendata.resas-portal.go.jp/docs/api/v1/industries/middle.html
   */
  middleIndustries(sicCode) {
    if (sicCode == null) {
      throw new TypeError(`[${PACKAGE_NAME}] sicCode引数が指定されていません`);
    }
    if (typeof sicCode !== 'string') {
      throw new TypeError(`[${PACKAGE_NAME}] sicCodeに文字列以外の値が入っています`);
    }
    return request(`${API_ENDPOINT}/api/v1/industries/middle`, {
      headers: this.defaultHeaders,
      query: {
        sicCode,
      },
    })
        .then(({body}) => body.json())
        .then((data) => data.result);
  }

  /**
   * 産業小分類
   * @param {string} simcCode 産業中分類コード
   * @return {Promise&lt;Array>} 産業小分類
   * Ref: https://opendata.resas-portal.go.jp/docs/api/v1/industries/narrow.html
   */
  narrowIndustries(simcCode) {
    if (simcCode == null) {
      throw new TypeError(`[${PACKAGE_NAME}] simcCode引数が指定されていません`);
    }
    if (typeof simcCode !== 'string') {
      throw new TypeError(`[${PACKAGE_NAME}] simcCodeに文字列以外の値が入っています`);
    }
    return request(`${API_ENDPOINT}/api/v1/industries/narrow`, {
      headers: this.defaultHeaders,
      query: {
        simcCode,
      },
    })
        .then(({body}) => body.json())
        .then((data) => data.result);
  }

  /**
   * 職業大分類
   * @return {Promise&lt;Array>} 職業大分類
   * Ref: https://opendata.resas-portal.go.jp/docs/api/v1/jobs/broad.html
   */
  broadJobs() {
    return request(`${API_ENDPOINT}/api/v1/jobs/broad`, {headers: this.defaultHeaders})
        .then(({body}) => body.json())
        .then((data) => data.result);
  }

  /**
   * 職業中分類
   * @param {string} iscoCode 職業大分類コード
   * @return {Promise&lt;Array>} 職業中分類
   * Ref: https://opendata.resas-portal.go.jp/docs/api/v1/jobs/middle.html
   */
  middleJobs(iscoCode) {
    if (iscoCode == null) {
      throw new TypeError(`[${PACKAGE_NAME}] iscoCode引数が指定されていません`);
    }
    if (typeof iscoCode !== 'string') {
      throw new TypeError(`[${PACKAGE_NAME}] iscoCodeに文字列以外の値が入っています`);
    }
    return request(`${API_ENDPOINT}/api/v1/jobs/middle`, {
      headers: this.defaultHeaders,
      query: {
        iscoCode,
      },
    })
        .then(({body}) => body.json())
        .then((data) => data.result);
  }

  /**
   * 特許.技術分野
   * @return {Promise&lt;Array>} 特許.技術分野
   * Ref: https://opendata.resas-portal.go.jp/docs/api/v1/patents/broad.html
   */
  broadPatents() {
    return request(`${API_ENDPOINT}/api/v1/patents/broad`, {headers: this.defaultHeaders})
        .then(({body}) => body.json())
        .then((data) => data.result);
  }

  /**
   * 特許.技術テーマ
   * @param {string} tecCode 技術分野コード
   * @return {Promise&lt;Array>} 特許.技術テーマ
   * Ref: https://opendata.resas-portal.go.jp/docs/api/v1/patents/middle.html
   */
  middlePatents(tecCode) {
    if (tecCode == null) {
      throw new TypeError(`[${PACKAGE_NAME}] tecCode引数が指定されていません`);
    }
    if (typeof tecCode !== 'string') {
      throw new TypeError(`[${PACKAGE_NAME}] tecCodeに文字列以外の値が入っています`);
    }
    return request(`${API_ENDPOINT}/api/v1/patents/middle`, {
      headers: this.defaultHeaders,
      query: {
        tecCode,
      },
    })
        .then(({body}) => body.json())
        .then((data) => data.result);
  }

  /**
   * 税関
   * @param {number} prefCode 都道府県コード
   * @return {Promise&lt;Array>} 税関
   * Ref: https://opendata.resas-portal.go.jp/docs/api/v1/customs.html
   */
  customs(prefCode) {
    if (prefCode == null) {
      throw new TypeError(`[${PACKAGE_NAME}] prefCode引数が指定されていません`);
    }
    if (typeof prefCode !== 'number') {
      throw new TypeError(`[${PACKAGE_NAME}] prefCodeに数値以外の値が入っています`);
    }
    return request(`${API_ENDPOINT}/api/v1/customs`, {
      headers: this.defaultHeaders,
      query: {
        prefCode,
      },
    })
        .then(({body}) => body.json())
        .then((data) => data.result);
  }

  /**
   * 輸出入.取引国_地域
   * @return {Promise&lt;Array>} 輸出入.取引国_地域
   * Ref: https://opendata.resas-portal.go.jp/docs/api/v1/regions/broad.html
   */
  broadRegions() {
    return request(`${API_ENDPOINT}/api/v1/regions/broad`, {headers: this.defaultHeaders})
        .then(({body}) => body.json())
        .then((data) => data.result);
  }

  /**
   * 輸出入.取引国_国
   * @param {number} regionCode 地域コード
   * @return {Promise&lt;Array>} 輸出入.取引国_国
   * Ref: https://opendata.resas-portal.go.jp/docs/api/v1/regions/middle.html
   */
  middleRegions(regionCode) {
    if (regionCode == null) {
      throw new TypeError(`[${PACKAGE_NAME}] regionCode引数が指定されていません`);
    }
    if (typeof regionCode !== 'number') {
      throw new TypeError(`[${PACKAGE_NAME}] regionCodeに数値以外の値が入っています`);
    }
    return request(`${API_ENDPOINT}/api/v1/regions/middle`, {
      headers: this.defaultHeaders,
      query: {
        regionCode,
      },
    })
        .then(({body}) => body.json())
        .then((data) => data.result);
  }

  /**
   * 農業部門
   * @return {Promise&lt;Array>} 農業部門
   * Ref: https://opendata.resas-portal.go.jp/docs/api/v1/regions/agricultureDepartments.html
   */
  agricultureDepartments() {
    return request(`${API_ENDPOINT}/api/v1/regions/agricultureDepartments`, {headers: this.defaultHeaders})
        .then(({body}) => body.json())
        .then((data) => data.result);
  }

  /**
   * 特許権者の所在地
   * @param {number} prefCode 都道府県コード
   * @param {string} cityCode 市区町村コード。「すべての市区町村」を選択する場合は「-」を指定。
   * @return {Promise&lt;Array>} 特許権者の所在地
   * Ref: https://opendata.resas-portal.go.jp/docs/api/v1/patents/locations.html
   */
  patentLocations(prefCode, cityCode) {
    if (prefCode == null) {
      throw new TypeError(`[${PACKAGE_NAME}] prefCode引数が指定されていません`);
    }
    if (typeof prefCode !== 'number') {
      throw new TypeError(`[${PACKAGE_NAME}] prefCodeに数値以外の値が入っています`);
    }
    if (cityCode == null) {
      throw new TypeError(`[${PACKAGE_NAME}] cityCode引数が指定されていません`);
    }
    if (typeof cityCode !== 'string') {
      throw new TypeError(`[${PACKAGE_NAME}] cityCodeに文字列以外の値が入っています`);
    }
    return request(`${API_ENDPOINT}/api/v1/patents/locations`, {
      headers: this.defaultHeaders,
      query: {
        prefCode,
        cityCode,
      },
    })
        .then(({body}) => body.json())
        .then((data) => data.result);
  }

  /**
   * 輸出入.品目_大分類
   * @return {Promise&lt;Array>} 輸出入.品目_大分類
   * Ref: https://opendata.resas-portal.go.jp/docs/api/v1/tradeInfoItemTypes/broad.html
   */
  broadTradeInfoItemTypes() {
    return request(`${API_ENDPOINT}/api/v1/tradeInfoItemTypes/broad`, {headers: this.defaultHeaders})
        .then(({body}) => body.json())
        .then((data) => data.result);
  }

  /**
   * 輸出入.品目_中分類
   * @param {number} itemCode1 商品大分類コード
   * @return {Promise&lt;Array>} 輸出入.品目_中分類。「すべての大分類」を選択する場合は「-」を指定。
   * Ref: https://opendata.resas-portal.go.jp/docs/api/v1/tradeInfoItemTypes/middle.html
   */
  middleTradeInfoItemTypes(itemCode1) {
    if (itemCode1 == null) {
      throw new TypeError(`[${PACKAGE_NAME}] itemCode1引数が指定されていません`);
    }
    if (typeof itemCode1 !== 'number') {
      throw new TypeError(`[${PACKAGE_NAME}] itemCode1に数値以外の値が入っています`);
    }
    return request(`${API_ENDPOINT}/api/v1/tradeInfoItemTypes/middle`, {
      headers: this.defaultHeaders,
      query: {
        itemCode1,
      },
    })
        .then(({body}) => body.json())
        .then((data) => data.result);
  }
};

module.exports = ResusClient;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ResusClient.html">ResusClient</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Sun Jun 19 2022 23:59:00 GMT+0900 (Japan Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
